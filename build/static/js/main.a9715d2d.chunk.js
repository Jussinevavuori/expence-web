(this.webpackJsonpexpence=this.webpackJsonpexpence||[]).push([[0],{374:function(e,t,n){e.exports=n.p+"static/media/logo_google.696b80ec.png"},391:function(e,t,n){e.exports=n.p+"static/media/pexels-johannes-plenio-1103970.afe78909.jpg"},404:function(e,t,n){e.exports=n(562)},405:function(e,t,n){},406:function(e,t,n){},412:function(e,t,n){},413:function(e,t,n){},414:function(e,t,n){},437:function(e,t){},439:function(e,t){},453:function(e,t){},455:function(e,t){},483:function(e,t){},485:function(e,t){},486:function(e,t){},492:function(e,t){},494:function(e,t){},512:function(e,t){},514:function(e,t){},526:function(e,t){},529:function(e,t){},547:function(e,t,n){},548:function(e,t,n){},549:function(e,t,n){},550:function(e,t,n){},551:function(e,t,n){},552:function(e,t,n){},553:function(e,t,n){},554:function(e,t,n){},555:function(e,t,n){},556:function(e,t,n){},557:function(e,t,n){},558:function(e,t,n){},559:function(e,t,n){},560:function(e,t,n){},561:function(e,t,n){},562:function(e,t,n){"use strict";n.r(t);n(405),n(406);var a=n(0),r=n.n(a),o=n(22),i=n.n(o),c=n(27),u=n(3),s=n.n(u),l=n(8),d=n(13),m=n(58),f=(n(412),n(40)),p=n(75),v=n(596),h=n(598),b=n(600),g=n(573),y=n(374),E=n.n(y),w=n(599),j=n(601),O=n(602),k=(n(413),n(414),n(37)),x=n.n(k),S=n(563);function C(e){var t=e.condensed,n=e.className,a=e.color,o=Object(m.a)(e,["condensed","className","color"]);return r.a.createElement(S.a,Object.assign({},o,{color:function(){switch(a){case"white":case"black":return;default:return a}}(),className:x()(n,"Type",{condensed:t},"color-".concat(String(a)))}))}var D=n(595);function T(e){return r.a.createElement("div",{className:"AuthFrame"},r.a.createElement("div",{className:"container"},r.a.createElement("header",null,r.a.createElement(C,{variant:"h5",component:"h1",color:"white"},e.header)),r.a.createElement("div",{className:"content"},e.body,e.footer?r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,null),r.a.createElement("footer",null,e.footer)):null)))}var N=function(e){var t,n,o=Object(a.useState)(!1),i=Object(d.a)(o,2),c=i[0],u=i[1],s=Object(f.c)({resolver:Object(p.a)(ze)}),l=s.register,y=s.handleSubmit,k=s.errors,x=s.formState,S=(Object(m.a)(s,["register","handleSubmit","errors","formState"]),x.touched.email&&(null===(t=k.email)||void 0===t?void 0:t.message)),D=x.touched.password&&(null===(n=k.password)||void 0===n?void 0:n.message);return r.a.createElement("div",{className:"Login"},r.a.createElement(T,{header:"Login to Expence",body:r.a.createElement("form",{noValidate:!0,onSubmit:y(e.handleSubmit)},r.a.createElement(v.a,{id:"login-email",name:"email",type:"text",inputRef:l,label:"Email",variant:"outlined",error:!!S,helperText:S,fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(w.a,null))}}),r.a.createElement(v.a,{id:"login-password",name:"password",type:c?"text":"password",inputRef:l,label:"Password",variant:"outlined",error:!!D,helperText:D,fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(b.a,{onClick:function(){return u((function(e){return!e}))},size:"small"},c?r.a.createElement(j.a,null):r.a.createElement(O.a,null)))}}),r.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0},"Login"),e.error?r.a.createElement(C,{color:"error"},e.error):null,r.a.createElement(g.a,{variant:"outlined",onClick:function(){return e.handleGoogleSubmit()},startIcon:r.a.createElement("img",{className:"logo",src:E.a,alt:"Google Logo"}),fullWidth:!0},"Log in with Google")),footer:r.a.createElement("div",{className:"footerContent"},r.a.createElement(g.a,{onClick:function(){return e.handleCreateAccount()}},"Create account"),r.a.createElement(g.a,{onClick:function(){return e.handleForgotPassword()}},"Forgot password"))}))},P=n(21),I=n(11),A=n(32),_=function e(t){var n,a,r,o;Object(A.a)(this,e),this.id=void 0,this.displayName=void 0,this.email=void 0,this.photoUrl=void 0,this.googleId=void 0,this.id=t.id,this.displayName=null!==(n=t.displayName)&&void 0!==n?n:void 0,this.email=null!==(a=t.email)&&void 0!==a?a:void 0,this.photoUrl=null!==(r=t.photoUrl)&&void 0!==r?r:void 0,this.googleId=null!==(o=t.googleId)&&void 0!==o?o:void 0},F=Object(P.b)({id:Object(P.c)().required().min(1),displayName:Object(P.c)(),photoUrl:Object(P.c)(),email:Object(P.c)(),googleId:Object(P.c)()}).required();function W(e){try{return F.isValidSync(e),!0}catch(t){return!1}}var L={initialized:!1,_setInitialized:Object(I.b)((function(e,t){e.initialized=t})),user:null,isLoggedIn:Object(I.c)((function(e){return Boolean(e.user)})),accessToken:null,_setAccessToken:Object(I.b)((function(e,t){e.accessToken=t})),_login:Object(I.b)((function(e,t){W(t)&&(e.user=new _(t))})),_logout:Object(I.b)((function(e){e.user=null,e.accessToken=null})),getProfile:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.authService.getProfile();case 3:return(o=e.sent).onSuccess((function(e){t._login(e)})),t._setInitialized(!0),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),loginWithGoogle:Object(I.f)((function(e,t,n){return n.injections.authService.loginWithGoogle()})),loginWithEmailPassword:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.authService.loginWithEmailAndPassword(n);case 3:return(o=e.sent).onSuccess(Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.authService.getProfile();case 2:e.sent.onSuccess((function(e){t._login(e)}));case 4:case"end":return e.stop()}}),e)})))),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),registerWithEmailPassword:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.authService.registerWithEmailAndPassword(n);case 3:if(!(o=e.sent).isSuccess()){e.next=9;break}return e.next=7,r.authService.getProfile();case 7:e.sent.onSuccess((function(e){t._login(e)}));case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),forgotPassword:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.authService.forgotPassword(n);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),validateChangePasswordToken:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.authService.validatePasswordChangeToken(n);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),changePassword:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.authService.changePassword(n);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),confirmEmail:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.authService.confirmEmail(n);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),logout:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.authService.logout();case 3:return(o=e.sent).onSuccess((function(){t._logout()})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}())},M=n(33),R=n(634),q=n(35),B=function(){function e(t){if(Object(A.a)(this,e),this._value=void 0,Math.trunc(t)!==t)throw new Error("Cannot construct money amount from non-integer value");this._value=t}return Object(M.a)(e,[{key:"format",value:function(e){var t=Object(q.a)(Object(q.a)({},z),e),n="";switch(t.sign){case"always":this.isPositive&&(n+="+"),this.isNegative&&(n+="-");break;case"if-positive":this.isPositive&&(n+="+");break;case"if-negative":this.isNegative&&(n+="-")}switch(t.spaces){case"always":case"after-sign":n+=" "}switch(t.thousandSpaces){case"always":n+=Math.abs(this.euros).toFixed(0).split("").reverse().map((function(e,t){return t%3===2?" "+e:e})).reverse().join("");break;case"omit":n+=Math.abs(this.euros).toFixed(0)}switch(t.separator){case",":n+=",";break;case".":n+="."}switch(n+=this.cents.toFixed(0),t.spaces){case"always":case"before-unit":n+=" "}switch(t.unit){case"long":n+="EUR";break;case"symbol":n+="\u20ac"}return n.trim()}},{key:"add",value:function(t){return new e(this._value+t._value)}},{key:"subtract",value:function(t){return new e(this._value-t._value)}},{key:"value",get:function(){return this._value}},{key:"decimalValue",get:function(){return this._value/100}},{key:"euros",get:function(){return Math.trunc(this._value/100)}},{key:"cents",get:function(){return Math.floor(this._value%100)}},{key:"sign",get:function(){return 0===this._value?0:this._value>0?1:-1}},{key:"isPositive",get:function(){return this._value>0}},{key:"isNonNegative",get:function(){return this._value>=0}},{key:"isZero",get:function(){return 0===this._value}},{key:"isNonPositive",get:function(){return this._value<=0}},{key:"isNegative",get:function(){return this._value<0}}],[{key:"sum",value:function(t){return t.reduce((function(e,t){return e.add(t)}),new e(0))}}]),e}(),z={sign:"always",spaces:"always",thousandSpaces:"always",separator:".",unit:"symbol"},U=function(){function e(t){Object(A.a)(this,e),this.date=void 0,this.category=void 0,this.comment=void 0,this.amount=void 0,this.id=void 0,this.uid=void 0,this.date=new Date(t.time),this.comment=t.comment||"",this.category=t.category,this.amount=new B(Math.floor(t.integerAmount)),this.id=t.id||R.a(),this.uid=t.uid}return Object(M.a)(e,[{key:"toJson",value:function(){return{time:this.date.getTime(),category:this.category,comment:this.comment,integerAmount:this.amount.value,id:this.id,uid:this.uid}}}]),e}(),Y=n(24),G=n(25),V=n(603),H=n(71);function J(e,t,n){var a=e.reduce((function(e,n){var a,r=function(e){var n=t(e);return V.a(n,"yyyy-MM-dd")}(n);return Object(q.a)(Object(q.a)({},e),{},Object(Y.a)({},r,[].concat(Object(G.a)(null!==(a=e[r])&&void 0!==a?a:[]),[n])))}),{}),r=Object.entries(a).map((function(e){return{date:H.a(new Date(e[0])),items:e[1]}}));return(null===n||void 0===n?void 0:n.sort)?r.sort((function(e,t){return t.date.getTime()-e.date.getTime()})):r}function Z(e,t,n){var a=$(e),r=$(n);switch(t){case"<":return a<r;case"<=":return a<=r;case"==":return a===r;case">=":return a>=r;case">":return a>r}}function $(e){return 341*e.getFullYear()+31*e.getMonth()+e.getDate()}var K={items:Object(I.c)([function(e,t){return t.transactions.items},function(e,t){return t.interval.startDate},function(e,t){return t.interval.endDate}],(function(e,t,n){return e.filter((function(e){return!Z(e.date,"<",t)&&!Z(e.date,">",n)}))})),itemsByDates:Object(I.c)([function(e,t){return t.transactions.filtered.items}],(function(e){return J(e,(function(e){return e.date}),{sort:!0})})),count:Object(I.c)([function(e,t){return t.transactions.filtered.items}],(function(e){return e.length})),sums:Object(I.c)([function(e,t){return t.transactions.filtered.items}],(function(e){var t=e.filter((function(e){return e.amount.isPositive})).reduce((function(e,t){return e+t.amount.value}),0),n=e.filter((function(e){return e.amount.isNegative})).reduce((function(e,t){return e+t.amount.value}),0);return{all:new B(t+n),incomes:new B(t),expenses:new B(n)}}))},Q={items:[],itemsByDates:Object(I.c)((function(e){return J(e.items,(function(e){return e.date}),{sort:!0})})),count:Object(I.c)((function(e){return e.items.length})),sums:Object(I.c)((function(e){var t=e.items.filter((function(e){return e.amount.isPositive})).reduce((function(e,t){return e+t.amount.value}),0),n=e.items.filter((function(e){return e.amount.isNegative})).reduce((function(e,t){return e+t.amount.value}),0);return{all:new B(t+n),incomes:new B(t),expenses:new B(n)}})),filtered:K,categories:Object(I.c)((function(e){return e.items.map((function(e){return e.category})).filter((function(e,t,n){return n.indexOf(e)===t}))})),getTransactions:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.transactionService.getTransactions();case 3:return(o=e.sent).onSuccess((function(e){return t._getTransactions(e)})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),_getTransactions:Object(I.b)((function(e,t){e.items=t.map((function(e){return new U(e)}))})),postTransaction:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.transactionService.postTransaction(n);case 3:return(o=e.sent).onSuccess((function(e){return t._postTransaction(e)})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),_postTransaction:Object(I.b)((function(e,t){e.items.push(new U(t))})),deleteTransaction:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.transactionService.deleteTransaction(n);case 3:return(o=e.sent).onSuccess((function(){return t.deleteTransaction(n)})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),_deleteTransaction:Object(I.b)((function(e,t){e.items=e.items.filter((function(e){return e.id!==t}))})),putTransaction:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.transactionService.putTransaction(n);case 3:return(o=e.sent).onSuccess((function(e){return t._putTransaction(e)})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),_putTransaction:Object(I.b)((function(e,t){e.items=e.items.map((function(e){return e.id===t.id?new U(t):e}))})),patchTransaction:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.injections,e.next=3,r.transactionService.patchTransaction(n);case 3:return(o=e.sent).onSuccess((function(e){return t._patchTransaction(e)})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),_patchTransaction:Object(I.b)((function(e,t){e.items=e.items.map((function(e){return e.id===t.id?new U(t):e}))})),onAuthChanged:Object(I.g)((function(e,t){return[t.auth.logout,t.auth._login]}),(function(e,t){var n=Object(d.a)(t.resolvedTargets,2),a=n[0],r=n[1];switch(t.type){case a:e._clearTransactions();break;case r:e.getTransactions()}})),_clearTransactions:Object(I.b)((function(e){e.items=[]}))},X=n(211),ee=n(126),te=n(604),ne=n(127),ae=n(212),re=n(213),oe=n(605),ie=n(109),ce=n(110),ue=n(386),se=n(606),le=n(387),de=n(607),me=n(388),fe=n(608),pe=n(609),ve=n(610),he=n(611),be=n(395),ge={startDate:X.a(new Date),endDate:ee.a(new Date),setStartDate:Object(I.b)((function(e,t){if(Z(t,">",e.endDate))throw new Error("Start date cannot be after end date");e.startDate=t})),setEndDate:Object(I.b)((function(e,t){if(Z(t,"<",e.startDate))throw new Error("End date cannot be before start date");e.endDate=t})),setInterval:Object(I.b)((function(e,t){if(Z(t.startDate,">",t.endDate))throw new Error("End date cannot be before start date");e.startDate=t.startDate,e.endDate=t.endDate})),nextInterval:Object(I.b)((function(e){var t=te.a(e.startDate,e.endDate),n=ne.a(e.endDate,1);e.isYear?e.endDate=ae.a(n):e.isMonth?e.endDate=ee.a(n):e.isWeek?e.endDate=re.a(n,{weekStartsOn:1}):e.endDate=ne.a(n,t),e.startDate=n})),previousInterval:Object(I.b)((function(e){var t=te.a(e.startDate,e.endDate),n=oe.a(e.startDate,1);e.isYear?e.startDate=ie.a(n):e.isMonth?e.startDate=X.a(n):e.isWeek?e.startDate=ce.a(n,{weekStartsOn:1}):e.startDate=oe.a(n,t),e.endDate=n})),weekInterval:Object(I.b)((function(e){e.startDate=ce.a(e.startDate,{weekStartsOn:1}),e.endDate=re.a(e.startDate,{weekStartsOn:1})})),monthInterval:Object(I.b)((function(e){e.startDate=X.a(e.startDate),e.endDate=ee.a(e.startDate)})),yearInterval:Object(I.b)((function(e){e.startDate=ie.a(e.startDate),e.endDate=ae.a(e.startDate)})),isYear:Object(I.c)((function(e){return ue.a(e.startDate,e.endDate)&&1===se.a(e.startDate)&&le.a(e.endDate,de.a(e.endDate))})),isMonth:Object(I.c)((function(e){return me.a(e.startDate,e.endDate)&&fe.a(e.startDate)&&pe.a(e.endDate)})),isWeek:Object(I.c)((function(e){return ve.a(e.startDate,e.endDate,{weekStartsOn:1})&&1===he.a(e.startDate)&&0===he.a(e.endDate)})),smartDisplayString:Object(I.c)((function(e){return e.isYear?be.a(e.startDate,"yyyy"):e.isMonth?be.a(e.startDate,"MMMM, yyyy"):e.displayString})),displayString:Object(I.c)((function(e){return(ue.a(e.startDate,e.endDate)?be.a(e.startDate,"d.M"):be.a(e.startDate,"d.M.yyyy"))+" - "+be.a(e.endDate,"d.M.yyyy")}))},ye=n(170),Ee=n(169),we=n(389),je=n.n(we),Oe=function(){function e(){Object(A.a)(this,e)}return Object(M.a)(e,null,[{key:"API_URL",get:function(){return"https://expenceapp.herokuapp.com"}}]),e}(),ke=n(390),xe=n.n(ke),Se=function(){function e(t){Object(A.a)(this,e),this.message=void 0,this.status=void 0,this.code=void 0,this.data=void 0,this.message=t.message,this.status=t.status,this.code=t.code,this.data=t.data}return Object(M.a)(e,null,[{key:"fromAxiosError",value:function(t){if(t.response){var n=t.response.data;return new e({status:t.response.status,message:(null===n||void 0===n?void 0:n.message)&&"string"===typeof n.message?n.message:"Unknown server error",code:(null===n||void 0===n?void 0:n.code)&&"string"===typeof n.code?n.code:"server/unknown",data:(null===n||void 0===n?void 0:n.errors)&&"object"===typeof n.errors?{errors:n.errors}:{}})}return t.request?new e({status:21,code:"server/unavailable",message:"Could not reach server",data:{}}):new e({status:22,code:"server/failure-formulating-request",message:"Could not formulate request to server",data:{}})}}]),e}();function Ce(e){return e.then((function(e){return new De(e)})).catch((function(e){return new Te(e)}))}var De=function(){function e(t){Object(A.a)(this,e),this.value=void 0,this.value=t}return Object(M.a)(e,[{key:"getOr",value:function(e){return this.value}},{key:"isSuccess",value:function(){return!0}},{key:"isFailure",value:function(){return!1}},{key:"onSuccess",value:function(e){e(this.value)}},{key:"onFailure",value:function(e){}},{key:"map",value:function(e){return e(this.value)}},{key:"mapSuccess",value:function(t){return new e(t(this.value))}},{key:"mapFailure",value:function(t){return new e(this.value)}},{key:"transform",value:function(t,n,a){return t(this.value)?new e(n(this.value).value):new Te(a(this.value).value)}},{key:"ensureType",value:function(t,n,a){var r=t(this.value);return n(r)?new e(r):a(r)}}],[{key:"From",value:function(t){return new e(t)}},{key:"Empty",value:function(){return new e(void 0)}}]),e}(),Te=function(){function e(t){Object(A.a)(this,e),this.value=void 0,this.value=t}return Object(M.a)(e,[{key:"getOr",value:function(e){return e}},{key:"onSuccess",value:function(e){}},{key:"onFailure",value:function(e){e(this.value)}},{key:"isSuccess",value:function(){return!1}},{key:"isFailure",value:function(){return!0}},{key:"map",value:function(t){return new e(this.value)}},{key:"mapSuccess",value:function(t){return new e(this.value)}},{key:"mapFailure",value:function(t){return new e(t(this.value))}},{key:"transform",value:function(t,n,a){return new e(this.value)}},{key:"ensureType",value:function(t,n,a){return new e(this.value)}}],[{key:"Problem",value:function(t){return new e(new Se(t))}}]),e}(),Ne=function(){function e(){Object(A.a)(this,e),this.baseURL=void 0,this.axios=void 0,this.baseURL="".concat(Oe.API_URL,"/api"),this.axios=je.a.create({baseURL:this.baseURL,withCredentials:!0})}return Object(M.a)(e,[{key:"endpoint",value:function(e){return"".concat(this.baseURL).concat(e)}},{key:"isAccessTokenValid",value:function(){var e=Le.getState().auth.accessToken;if(!e)return!1;try{var t=xe.a.decode(e),n=1e3*Number((null===t||void 0===t?void 0:t.exp)||0);return Date.now()<n-5e3}catch(a){return console.warn("Error occured while checking access token",a),!1}}},{key:"attemptRefreshAccessToken",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,a,r,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],this.isAccessTokenValid()&&!t){e.next=15;break}return n=this.endpoint("/auth/refresh_token"),e.prev=4,e.next=7,this.axios.get(n);case 7:a=e.sent,r=a.data,Le.getActions().auth._setAccessToken(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),Le.getState().auth.accessToken&&Le.getActions().auth.logout();case 15:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"onBeforeRequest",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.attemptRefreshAccessToken();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(e){var t=Le.getState().auth.accessToken,n=Object(q.a)({},null===e||void 0===e?void 0:e.headers);return t&&(n.Authorization="bearer ".concat(t)),Object(q.a)(Object(q.a)({},e),{},{headers:n})}},{key:"handleRequest",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,o,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onBeforeRequest();case 2:return r=this.endpoint(t),o=this.getConfig(n),i=a(r,o),e.next=7,Ce(i);case 7:return c=e.sent,e.abrupt("return",c.mapFailure((function(e){return Se.fromAxiosError(e)})));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest(t,n,(function(e,t){return a.axios.get(e,t)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest(t,a,(function(e,t){return r.axios.post(e,n,t)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest(t,n,(function(e,t){return a.axios.delete(e,t)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest(t,a,(function(e,t){return r.axios.put(e,n,t)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest(t,a,(function(e,t){return r.axios.patch(e,n,t)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),Pe=function(e){Object(ye.a)(n,e);var t=Object(Ee.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"getProfile",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/auth/profile");case 2:return t=e.sent,e.abrupt("return",t.ensureType((function(e){return e.data}),W,(function(e){return Te.Problem({status:23,code:"auth/profile/invalid-response",message:"Invalid profile response from server",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"registerWithEmailAndPassword",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/auth/register",t);case 2:return n=e.sent,e.abrupt("return",n.transform((function(e){return 200===e.status}),(function(){return De.Empty()}),(function(e){return Te.Problem({status:23,code:"auth/register/invalid-response",message:"Invalid registration response from server",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithEmailAndPassword",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/auth/login",t);case 2:return n=e.sent,e.abrupt("return",n.transform((function(e){return 200===e.status}),(function(){return De.Empty()}),(function(e){return Te.Problem({status:23,code:"auth/login/invalid-response",message:"Invalid login response from server",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/auth/forgot_password",t);case 2:return n=e.sent,e.abrupt("return",n.transform((function(e){return 200===e.status}),(function(){return De.Empty()}),(function(e){return Te.Problem({status:23,code:"auth/forgotpassword/invalid-response",message:"Invalid forgot password response from server",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validatePasswordChangeToken",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/auth/change_password/".concat(t.token));case 2:return n=e.sent,e.abrupt("return",n.transform((function(e){return 200===e.status&&"string"===typeof e.data}),(function(e){return new De(String(e.data))}),(function(e){return Te.Problem({status:23,code:"auth/changepassword/invalid-response",message:"Invalid change password response from server",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/auth/change_password/".concat(t.token),{password:t.password});case 2:return n=e.sent,e.abrupt("return",n.transform((function(e){return 200===e.status}),(function(){return De.Empty()}),(function(e){return Te.Problem({status:23,code:"auth/changepassword/invalid-response",message:"Invalid change password response from server",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"confirmEmail",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/auth/confirm_email/".concat(t.token));case 2:return n=e.sent,e.abrupt("return",n.transform((function(e){return 200===e.status}),(function(){return De.Empty()}),(function(e){return Te.Problem({status:23,code:"auth/confirmemail/invalid-response",message:"Invalid confirm email response from server",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/auth/logout");case 2:return t=e.sent,e.abrupt("return",t.transform((function(e){return 200===e.status}),(function(){return De.Empty()}),(function(e){return Te.Problem({status:23,code:"auth/logout/invalid-response",message:"Invalid logout response from server",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loginWithGoogle",value:function(){window.location.href=this.endpoint("/auth/google")}}]),n}(Ne),Ie=Object(P.b)({id:Object(P.c)().required(),uid:Object(P.c)().required(),time:Object(P.a)().positive().integer().required(),category:Object(P.c)().min(1).required(),integerAmount:Object(P.a)().integer().required(),comment:Object(P.c)()}).required();function Ae(e){try{return Ie.validateSync(e),!0}catch(t){return!1}}function _e(e){return Array.isArray(e)&&e.every(Ae)}var Fe=function(e){Object(ye.a)(n,e);var t=Object(Ee.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"getTransactions",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/transactions");case 2:return t=e.sent,e.abrupt("return",t.ensureType((function(e){return e.data}),_e,(function(e){return Te.Problem({status:23,code:"transactions/get/invalid-response",message:"Could not get transactions, received invalid response.",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"postTransaction",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/transactions",t);case 2:return n=e.sent,e.abrupt("return",n.ensureType((function(e){return e.data}),Ae,(function(e){return Te.Problem({status:23,code:"transactions/post/invalid-response",message:"Could not post transaction, received invalid response.",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTransaction",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/transactions/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.transform((function(e){return 200===e.status}),(function(){return De.Empty()}),(function(e){return Te.Problem({status:23,code:"transactions/delete/invalid-response",message:"Could not delete transaction, received invalid response.",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"putTransaction",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.put("/transactions/".concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.ensureType((function(e){return e.data}),Ae,(function(e){return Te.Problem({status:23,code:"transactions/put/invalid-response",message:"Could not put transaction, received invalid response.",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"patchTransaction",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.patch("/transactions/".concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.ensureType((function(e){return e.data}),Ae,(function(e){return Te.Problem({status:23,code:"transactions/patch/invalid-response",message:"Could not patch transaction, received invalid response.",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ne),We={transactions:Q,interval:ge,auth:L},Le=Object(I.d)(We,{injections:{authService:new Pe,transactionService:new Fe}});var Me=Object(I.e)(),Re=Me.useStoreActions,qe=(Me.useStoreDispatch,Me.useStoreState);Me.useStore;function Be(){var e=Object(c.g)();return function(t){return e.push("string"===typeof t?t:t(zt))}}var ze=P.b({email:P.c().defined().email(),password:P.c().defined()}).defined(),Ue=function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],o=t[1],i=Be(),c=qe((function(e){return e.auth.user})),u=Re((function(e){return e.auth.loginWithGoogle})),m=Re((function(e){return e.auth.loginWithEmailPassword}));function f(){return(f=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(void 0),e.next=3,m(t);case 3:(n=e.sent).onSuccess((function(){return i((function(e){return e.dashboard}))})),n.onFailure((function(e){switch(e.code){case"data/invalid-request-data":o("Invalid email or password.");break;case"auth/invalid-credentials":o("Wrong password or the user does not have a password.");break;case"auth/user-not-found":o("No user exists with that email.");break;case"auth/email-not-confirmed":o("Confirm your email before logging in.");break;case"server/unavailable":o("Could not contact server. Try again later.");break;default:console.warn("Uncaught error code in login:",e),o("An error occured while logging in. Try again.")}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i((function(e){return e.forgotPassword}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i((function(e){return e.register}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){c&&i((function(e){return e.dashboard}))}),[c,i]),r.a.createElement(N,{handleGoogleSubmit:function(){return p.apply(this,arguments)},handleSubmit:function(e){return f.apply(this,arguments)},handleForgotPassword:function(){return v.apply(this,arguments)},handleCreateAccount:function(){return h.apply(this,arguments)},error:n})},Ye=(n(547),function(e){var t,n,o=Object(a.useState)(!1),i=Object(d.a)(o,2),c=i[0],u=i[1],s=Object(f.c)({resolver:Object(p.a)(Ge)}),l=s.formState.touched.email&&(null===(t=s.errors.email)||void 0===t?void 0:t.message),m=s.formState.touched.password&&(null===(n=s.errors.password)||void 0===n?void 0:n.message);return r.a.createElement("div",{className:"Register"},r.a.createElement(T,{header:"Create account",body:e.registered?r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{variant:"h6"},"Succesfully registered."),r.a.createElement(C,null,"Check your email in order to confirm your email address. ","You can login after having confirmation.")):r.a.createElement("form",{onSubmit:s.handleSubmit(e.handleSubmit)},r.a.createElement(v.a,{id:"register-email",name:"email",type:"text",inputRef:s.register,label:"Email",variant:"outlined",error:!!l,helperText:l,fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(w.a,null))}}),r.a.createElement(v.a,{id:"register-password",name:"password",type:c?"text":"password",inputRef:s.register,label:"Password",variant:"outlined",error:!!m,helperText:m,fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(b.a,{onClick:function(){return u((function(e){return!e}))},size:"small"},c?r.a.createElement(j.a,null):r.a.createElement(O.a,null)))}}),r.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0},"Create account"),e.error?r.a.createElement(C,{color:"error"},e.error):null),footer:r.a.createElement(g.a,{onClick:function(){return e.handleLogin()}},"Already have an account? Login")}))}),Ge=Object(P.b)({email:Object(P.c)().defined().max(255).email(),password:Object(P.c)().defined().min(6).max(255)}).defined(),Ve=function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(!1),c=Object(d.a)(i,2),u=c[0],m=c[1],f=Be(),p=Re((function(e){return e.auth.registerWithEmailPassword}));function v(){return(v=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(void 0),console.log("Submit"),e.next=4,p({email:t.email,password:t.password});case 4:(n=e.sent).onSuccess((function(){return m(!0)})),n.onFailure((function(e){switch(e.code){case"data/invalid-request-data":o("Invalid email or password.");break;case"auth/user-already-exists":o("An user already exists with that email.");break;case"server/unavailable":o("Could not contact server. Try again later.");break;default:console.warn("Uncaught error code in login:",e),o("An error occured while logging in. Try again.")}}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f((function(e){return e.login}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(Ye,{handleSubmit:function(e){return v.apply(this,arguments)},handleLogin:function(){return h.apply(this,arguments)},error:n,registered:u})};function He(e){var t=e.fallbackRoute,n=Object(m.a)(e,["fallbackRoute"]),a=zt.login,o=qe((function(e){return e.auth.initialized})),i=qe((function(e){return e.auth.isLoggedIn}));return o?i?r.a.createElement(c.b,n):r.a.createElement(c.a,{to:t||a}):null}n(548),n(549),n(550);var Je=n(612),Ze=n(613);function $e(e){var t=e.transaction.amount.isPositive?"positive":"negative";return r.a.createElement("div",{className:"TransactionListing"},r.a.createElement("div",{className:x()("icon",t)},r.a.createElement("div",{className:"iconContainer"},e.transaction.amount.isPositive?r.a.createElement(Je.a,null):r.a.createElement(Ze.a,null))),r.a.createElement("div",{className:"category"},r.a.createElement("span",null,e.transaction.category)),r.a.createElement("div",{className:"comment"},r.a.createElement("span",null,e.transaction.comment)),r.a.createElement("div",{className:x()("amount",t)},r.a.createElement("span",null,e.transaction.amount.format())))}function Ke(e){var t=Re((function(e){return e.transactions.deleteTransaction})),n=Object(a.useCallback)((function(){t(e.transaction.id)}),[e.transaction,t]);return r.a.createElement($e,{transaction:e.transaction,handleDelete:n})}function Qe(e){var t=Re((function(e){return e.transactions.deleteTransaction}));return r.a.createElement("div",{className:"TransactionList"},r.a.createElement("ul",null,e.itemsByDates.map((function(e){var n,a=(n=e.date).getFullYear()===Xe?Object(be.a)(n,"dd.MM."):Object(be.a)(n,"dd.MM.yyyy");return r.a.createElement("li",{key:a},r.a.createElement("p",null,a),r.a.createElement("ul",null,e.items.map((function(e){return r.a.createElement("li",{key:e.id,onClick:function(){t(e.id).catch((function(e){console.log("Error deleting:",e)}))}},r.a.createElement(Ke,{transaction:e}))}))))}))))}var Xe=(new Date).getFullYear();function et(e){var t=qe((function(e){return e.transactions.itemsByDates})),n=qe((function(e){return e.transactions.filtered.itemsByDates}));return r.a.createElement(Qe,{itemsByDates:e.bypassFilters?t:n})}n(551);var tt=n(614),nt=n(615),at=n(616);function rt(e){return r.a.createElement("div",{className:"TransactionListFilters"},r.a.createElement("div",{className:"date-selector"},r.a.createElement(tt.a,{size:"small"},r.a.createElement(g.a,{size:"small",variant:"outlined",onClick:e.onPreviousInterval},r.a.createElement(nt.a,null)),r.a.createElement(g.a,{size:"small",className:e.isYear?"selected-button":"",onClick:e.onYearInterval},"Year"),r.a.createElement(g.a,{size:"small",className:e.isMonth?"selected-button":"",onClick:e.onMonthInterval},"Month"),r.a.createElement(g.a,{size:"small",className:e.isWeek?"selected-button":"",onClick:e.onWeekInterval},"Week"),r.a.createElement(g.a,{size:"small",variant:"outlined",onClick:e.onNextInterval},r.a.createElement(at.a,null)))))}function ot(e){var t=Re((function(e){return e.interval.nextInterval})),n=Re((function(e){return e.interval.previousInterval})),a=Re((function(e){return e.interval.weekInterval})),o=Re((function(e){return e.interval.monthInterval})),i=Re((function(e){return e.interval.yearInterval})),c=qe((function(e){return e.interval.startDate})),u=qe((function(e){return e.interval.endDate})),s=qe((function(e){return e.interval.isYear})),l=qe((function(e){return e.interval.isMonth})),d=qe((function(e){return e.interval.isWeek})),m=qe((function(e){return e.interval.displayString}));return r.a.createElement(rt,{onNextInterval:function(){return t()},onPreviousInterval:function(){return n()},onWeekInterval:function(){return a()},onMonthInterval:function(){return o()},onYearInterval:function(){return i()},startDate:c,endDate:u,isYear:s,isMonth:l,isWeek:d,intervalString:m})}n(552);var it=n(391),ct=n.n(it);function ut(e){return r.a.createElement("header",{className:"PageHeader"},r.a.createElement("img",{src:ct.a,alt:"",className:"texture"}),e.children)}n(553);function st(e){var t=e.amount,n=e.formatOptions,a=Object(m.a)(e,["amount","formatOptions"]);return r.a.createElement("span",{className:"MoneyType"},r.a.createElement(C,Object.assign({condensed:!0},a,{component:"span"}),t.format(n)))}function lt(e){return r.a.createElement("div",{className:"Dashboard"},r.a.createElement(ut,null,r.a.createElement("div",{className:"totals"},r.a.createElement(st,{amount:e.filteredSum,variant:"h4"}))),r.a.createElement("div",{className:"filters"},r.a.createElement(ot,null)),r.a.createElement("main",null,r.a.createElement("div",{className:"list"},r.a.createElement(et,null))))}function dt(){var e=qe((function(e){return e.auth.user})),t=qe((function(e){return e.interval.smartDisplayString})),n=qe((function(e){return e.transactions.filtered.sums}));return e?r.a.createElement(lt,{intervalString:t,filteredSum:n.all,filteredIncomesSum:n.incomes,filteredExpensesSum:n.expenses,user:e}):null}n(554);function mt(e){return r.a.createElement("div",{className:"Settings"},e.user.photoUrl?r.a.createElement("img",{style:{width:64,height:64},alt:"profile",src:e.user.photoUrl}):null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Display name"),r.a.createElement("td",null,e.user.displayName)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,e.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,e.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Google ID"),r.a.createElement("td",null,e.user.googleId)))),r.a.createElement("button",{onClick:e.handleLogout},"Log out"))}function ft(e){var t=qe((function(e){return e.auth.user})),n=Re((function(e){return e.auth.logout})),a=Be();function o(){return(o=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:e.sent.onSuccess((function(){a((function(e){return e.login}))}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t?r.a.createElement(mt,{user:t,handleLogout:function(){return o.apply(this,arguments)}}):null}var pt=n(153);n(555);function vt(e){var t=Re((function(e){return e.transactions.postTransaction}));return r.a.createElement("div",{className:"Analytics"},r.a.createElement("input",{type:"file",accept:".csv",onChange:function(e){if(console.log("Handling change"),!e.target.files)throw new Error("No files array");var n=e.target.files[0];if(!n)throw new Error("No file");var a=new FileReader;a.addEventListener("load",(function(e){if(!e.target)throw new Error("No load event target");if(!e.target.result)throw new Error("Load event target result is null");var n,a=e.target.result.toString().split("\n"),r=Object(pt.a)(a);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o){var i=o.split(";");t({category:i[1],comment:i[3],integerAmount:Number(i[2].replace(/[^\d-]/g,"")),time:new Date(i[0].split(".").reverse().map((function(e){return e.padStart(2,"0")})).join("-")).getTime()})}}}catch(c){r.e(c)}finally{r.f()}})),a.readAsText(n)}}))}function ht(e){return r.a.createElement(vt,null)}n(556);function bt(e){var t,n=Object(f.c)({resolver:Object(p.a)(gt)}),a=n.register,o=n.handleSubmit,i=n.errors,c=n.formState,u=(Object(m.a)(n,["register","handleSubmit","errors","formState"]),c.touched.email&&(null===(t=i.email)||void 0===t?void 0:t.message));return r.a.createElement("div",{className:"ForgotPassword"},r.a.createElement(T,{header:"Forgot password",body:e.success?r.a.createElement(C,null,"Recovery email sent. Check your email."):r.a.createElement("form",{noValidate:!0,onSubmit:o(e.handleSubmit)},r.a.createElement(C,null,"Enter your email below and we will send you an email containing a link, which you can use to change your password."),r.a.createElement(v.a,{id:"login-email",name:"email",type:"text",inputRef:a,label:"Email",variant:"outlined",error:!!u,helperText:u,fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(w.a,null))}}),r.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0},"Send recovery email"),e.error?r.a.createElement(C,{color:"error"},e.error):null),footer:r.a.createElement(g.a,{onClick:function(){return e.handleLogin()}},"Back")}))}var gt=P.b({email:P.c().defined().min(3).max(255).email()}).defined();function yt(e){var t=Object(a.useState)(),n=Object(d.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(!1),u=Object(d.a)(c,2),m=u[0],f=u[1],p=Be(),v=Re((function(e){return e.auth.forgotPassword})),h=Re((function(e){return e.auth.loginWithGoogle}));function b(){return(b=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(void 0),e.next=3,v(t);case 3:(n=e.sent).onSuccess((function(){return f(!0)})),n.onFailure((function(e){switch(e.code){case"data/invalid-request-data":i("Invalid email or password.");break;case"auth/invalid-credentials":i("Wrong password or the user does not have a password.");break;case"auth/user-not-found":i("No user exists with that email.");break;case"server/unavailable":i("Could not contact server. Try again later.");break;default:console.warn("Uncaught error code in login:",e),i("An error occured while logging in. Try again.")}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p((function(e){return e.login}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p((function(e){return e.register}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(bt,{handleSubmit:function(e){return b.apply(this,arguments)},handleCreateAccount:function(){return y.apply(this,arguments)},handleGoogleSubmit:function(){return E.apply(this,arguments)},handleLogin:function(){return g.apply(this,arguments)},success:m,error:o})}n(557),n(558);var Et=n(624),wt=n(625),jt=n(626),Ot=n(627),kt=n(628),xt=n(629),St=n(630),Ct=(n(559),n(632)),Dt=n(635);function Tt(e){return r.a.createElement("form",{className:"TransactionForm",onSubmit:function(t){t.preventDefault(),e.onSubmit()}},r.a.createElement(C,{variant:"button"},"New transaction"),r.a.createElement(v.a,{value:e.amount,onChange:function(t){return e.onAmountChange(t.target.value)},id:"transaction-amount",variant:"outlined",name:"amount",type:"numeric",label:"Amount",error:!!e.errors.amount,helperText:e.errors.amount,fullWidth:!0,required:!0,size:"small",InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(C,null,"EUR"))}}),r.a.createElement(Dt.a,{value:e.category,onChange:function(t,n){return e.onCategoryChange(n)},id:"transaction-category",freeSolo:!0,openOnFocus:!0,autoHighlight:!0,selectOnFocus:!0,disableClearable:!0,fullWidth:!0,size:"small",options:e.categories,renderInput:function(t){return r.a.createElement(v.a,Object.assign({variant:"outlined",name:"category",type:"text",label:"Category",error:!!e.errors.category,helperText:e.errors.category,required:!0},t))}}),r.a.createElement(Ct.a,{value:e.time,onChange:function(t){return e.onTimeChange(t)},format:"dd/MM/yyyy",id:"transaction-time",variant:"inline",inputVariant:"outlined",label:"Date",error:!!e.errors.time,helperText:e.errors.time,fullWidth:!0,required:!0,size:"small"}),r.a.createElement(v.a,{value:e.comment,onChange:function(t){return e.onCommentChange(t.target.value)},id:"transaction-comment",variant:"outlined",name:"comment",type:"text",label:"Comment",error:!!e.errors.comment,helperText:e.errors.comment,fullWidth:!0,size:"small"}),r.a.createElement(g.a,{type:"submit",color:"primary",variant:"contained",size:"small"},"Create"))}function Nt(e){var t=qe((function(e){return e.transactions.categories})),n=Re((function(e){return e.transactions.postTransaction})),o=Object(a.useState)(""),i=Object(d.a)(o,2),c=i[0],u=i[1],m=Object(a.useState)(""),f=Object(d.a)(m,2),p=f[0],v=f[1],h=Object(a.useState)(new Date),b=Object(d.a)(h,2),g=b[0],y=b[1],E=Object(a.useState)(""),w=Object(d.a)(E,2),j=w[0],O=w[1],k=Object(a.useState)(),x=Object(d.a)(k,2),S=x[0],C=x[1],D=Object(a.useState)(),T=Object(d.a)(D,2),N=T[0],P=T[1],I=Object(a.useState)(),A=Object(d.a)(I,2),_=A[0],F=A[1],W=Object(a.useState)(),L=Object(d.a)(W,2),M=L[0],R=L[1],q=Object(a.useState)(),B=Object(d.a)(q,2),z=B[0],U=B[1];function Y(){var e=function(){if(!/^-?\d*[\.,]?\d{0,2}$/.test(c.trim()))return"Invalid number"}(),t=function(){var e=/[A-Za-z\d\-_\s]+/.test(p.trim()),t=""===p.trim();return e?t?"Please enter a cetegory":void 0:"Invalid category, do not use any special characters"}(),n=function(){if(!(g.getTime()>0&&!isNaN(g.getTime())))return"Invalid date"}();return P(e),F(t),R(n),U(void 0),!(e||t||n)}function G(){return(G=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y()){e.next=7;break}return e.next=4,n({integerAmount:Math.trunc(100*Number(c.trim().replace(/,/g,"."))),category:p.trim(),time:g.getTime(),comment:j.trim()});case 4:(t=e.sent).onSuccess((function(){u(""),v(""),y(new Date),O("")})),t.onFailure((function(e){var t,n,a,r,o,i,c,u,s,l,d,m,f,p;switch(e.code){case"data/invalid-request-data":(null===(t=e.data)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.integerAmount)&&P(String(e.data.errors.integerAmount)),(null===(a=e.data)||void 0===a||null===(r=a.errors)||void 0===r?void 0:r.category)&&F(String(e.data.errors.category)),(null===(o=e.data)||void 0===o||null===(i=o.errors)||void 0===i?void 0:i.comment)&&U(String(e.data.errors.comment)),(null===(c=e.data)||void 0===c||null===(u=c.errors)||void 0===u?void 0:u.time)&&R(String(e.data.errors.time)),(null===(s=e.data)||void 0===s||null===(l=s.errors)||void 0===l?void 0:l._root)&&C(e.data.errors._root),(null===(d=e.data)||void 0===d||null===(m=d.errors)||void 0===m?void 0:m.id)&&C(e.data.errors.id),(null===(f=e.data)||void 0===f||null===(p=f.errors)||void 0===p?void 0:p.uid)&&C(e.data.errors.uid);break;case"transaction/already-exists":C("Could not post transaction due to overlapping IDs");break;case"server/unavailable":C("Could not react server. Try again later.");break;default:console.warn("Uncaught failure",e),C("Error posting transaction.")}}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(Tt,{onSubmit:function(){return G.apply(this,arguments)},amount:c,category:p,time:g,comment:j,onAmountChange:function(e){return u(e)},onCategoryChange:function(e){return v(e)},onTimeChange:function(e){return y(e)},onCommentChange:function(e){return O(e)},errors:{main:S,amount:N,category:_,time:M,comment:z},categories:t})}function Pt(e){var t=Object(a.useMemo)((function(){return window.matchMedia(e)}),[e]),n=Object(a.useState)(!1),r=Object(d.a)(n,2),o=r[0],i=r[1],c=Object(a.useCallback)((function(){i(t.matches)}),[t]);return Object(a.useEffect)((function(){return c(),t.addEventListener("change",c),function(){t.removeEventListener("change",c)}}),[t,c]),o}function It(e){var t=Pt("(min-width: 600px)");return r.a.createElement(r.a.Fragment,null,r.a.createElement(Et.a,{open:e.transactionFormOpen,onClose:e.onTransactionFormClose,anchor:t?"left":"bottom"},r.a.createElement(Nt,null)),r.a.createElement("div",{className:"Sidebar"},t?r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"top-row"},r.a.createElement(C,{variant:"h4",component:"h6"},"Expence"),r.a.createElement(b.a,{onClick:e.logout},r.a.createElement(wt.a,null))),r.a.createElement("div",{className:"bottom-row"},r.a.createElement(jt.a,null),r.a.createElement(C,null,e.user.displayName))),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"tabContainer"},r.a.createElement(g.a,{variant:"text",className:x()("tab",{active:e.isDashboard}),onClick:e.onDashboard,startIcon:r.a.createElement(Ot.a,null)},"Dashboard")),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(g.a,{variant:"text",className:x()("tab",{active:e.isAnalytics}),onClick:e.onAnalytics,startIcon:r.a.createElement(kt.a,null)},"Analytics")),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(g.a,{variant:"text",className:x()("tab",{active:e.isBudget}),onClick:e.onBudget,startIcon:r.a.createElement(xt.a,null)},"Budget")),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(g.a,{variant:"text",className:x()("tab",{active:e.isSettings}),onClick:e.onSettings,startIcon:r.a.createElement(St.a,null)},"Settings")),r.a.createElement("div",{className:"tabContainer addButton"},r.a.createElement(g.a,{variant:"text",className:x()("tab"),onClick:e.onTransactionFormOpen,startIcon:r.a.createElement(Je.a,null)},"New transaction")))):r.a.createElement("div",{className:"tabs"},r.a.createElement("div",{className:"tabContainer"},r.a.createElement(b.a,{className:x()("tab",{active:e.isDashboard}),onClick:e.onDashboard},r.a.createElement(Ot.a,null))),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(b.a,{className:x()("tab",{active:e.isAnalytics}),onClick:e.onAnalytics},r.a.createElement(kt.a,null))),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(b.a,{className:x()("tab"),onClick:e.onTransactionFormOpen},r.a.createElement(Je.a,null))),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(b.a,{className:x()("tab",{active:e.isBudget}),onClick:e.onBudget},r.a.createElement(xt.a,null))),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(b.a,{className:x()("tab",{active:e.isSettings}),onClick:e.onSettings},r.a.createElement(St.a,null))))))}function At(e){var t=Object(c.i)(zt.dashboard),n=Object(c.i)(zt.analytics),o=Object(c.i)(zt.budget),i=Object(c.i)(zt.settings),u=qe((function(e){return e.auth.user})),s=Re((function(e){return e.auth.logout})),l=Be(),m=Object(a.useState)(!1),f=Object(d.a)(m,2),p=f[0],v=f[1];return u?r.a.createElement(It,{isDashboard:!!t,onDashboard:function(){return l(zt.dashboard)},isAnalytics:!!n,onAnalytics:function(){return l(zt.analytics)},isBudget:!!o,onBudget:function(){return l(zt.budget)},isSettings:!!i,onSettings:function(){return l(zt.settings)},user:u,logout:function(){return s()},transactionFormOpen:p,onTransactionFormOpen:function(){return v(!0)},onTransactionFormClose:function(){return v(!1)}}):null}function _t(e){return r.a.createElement("div",{className:"AppFrame"},r.a.createElement("div",{className:"sidebar"},r.a.createElement(At,null)),r.a.createElement("div",{className:"content"},e.children))}function Ft(e){return r.a.createElement(_t,{children:e.children})}n(560);var Wt=n(622);function Lt(e){var t,n=Object(a.useState)(!1),o=Object(d.a)(n,2),i=o[0],c=o[1],u=Object(f.c)({resolver:Object(p.a)(Mt)}),s=u.formState.touched.password&&(null===(t=u.errors.password)||void 0===t?void 0:t.message);return r.a.createElement("div",{className:"ChangePassword"},r.a.createElement(T,{header:"Change password",body:e.loading?r.a.createElement(Wt.a,null):e.validTokenEmail?e.passwordChangeSuccessful?r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null,"Password changed for "+e.validTokenEmail),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:e.onLogin,fullWidth:!0},"Login")):r.a.createElement("form",{onSubmit:u.handleSubmit(e.onSubmit)},r.a.createElement(C,null,"Enter a new password for "+e.validTokenEmail),r.a.createElement(v.a,{id:"change-password",name:"password",type:i?"text":"password",inputRef:u.register,label:"Password",variant:"outlined",error:!!s,helperText:s,fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(b.a,{onClick:function(){return c((function(e){return!e}))},size:"small"},i?r.a.createElement(j.a,null):r.a.createElement(O.a,null)))}}),r.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0},"Change password"),e.error?r.a.createElement(C,{color:"error"},e.error):null):r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{color:"error"},"Invalid password change link"),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:e.onLogin,fullWidth:!0},"Back to login"))}))}var Mt=P.b({password:P.c().defined().min(6).max(255)}).defined();function Rt(e){var t=Object(c.h)().token,n=Be(),o=Re((function(e){return e.auth.validateChangePasswordToken})),i=Re((function(e){return e.auth.changePassword})),u=Object(a.useState)(),s=Object(d.a)(u,2),l=s[0],m=s[1],f=Object(a.useState)(!1),p=Object(d.a)(f,2),v=p[0],h=p[1],b=Object(a.useState)(),g=Object(d.a)(b,2),y=g[0],E=g[1];if(Object(a.useEffect)((function(){t&&o({token:t}).then((function(e){e.onSuccess((function(e){m(e)})),e.onFailure((function(){m(null)}))}))}),[]),!t)return n((function(e){return e.login})),null;return r.a.createElement(Lt,{validTokenEmail:l,loading:void 0===l,passwordChangeSuccessful:v,onSubmit:function(e){t&&i(Object(q.a)(Object(q.a)({},e),{},{token:t})).then((function(e){e.onSuccess((function(){h(!0)})),e.onFailure((function(){E("Could not change password")}))}))},onLogin:function(){return n((function(e){return e.login}))},error:y})}n(561);function qt(e){return r.a.createElement("div",{className:"ConfirmEmail"},r.a.createElement(T,{header:"Change password",body:function(){switch(e.success){case void 0:return r.a.createElement(Wt.a,null);case!1:return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{color:"error"},"Invalid password change link"),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:e.onLogin,fullWidth:!0},"Back to login"));case!0:return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null,"Email succesfully confirmed"),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:e.onLogin,fullWidth:!0},"Login"))}}()}))}function Bt(e){var t=Object(c.h)().token,n=Be(),o=Re((function(e){return e.auth.confirmEmail})),i=Object(a.useState)(),u=Object(d.a)(i,2),s=u[0],l=u[1];return Object(a.useEffect)((function(){t&&o({token:t}).then((function(e){l(e.isSuccess())}))}),[]),t?r.a.createElement(qt,{success:s,onLogin:function(){return n((function(e){return e.login}))}}):(n((function(e){return e.login})),null)}var zt={approot:"/app",dashboard:"/app/dashboard",analytics:"/app/analytics",budget:"/app/budget",settings:"/app/settings",login:"/",forgotPassword:"/forgotPassword",register:"/register",changePassword:function(e){return"/changePassword/".concat(e)},confirmEmail:function(e){return"/confirmEmail/".concat(e)}};function Ut(){return r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:zt.login},r.a.createElement(Ue,null)),r.a.createElement(c.b,{exact:!0,path:zt.register},r.a.createElement(Ve,null)),r.a.createElement(c.b,{exact:!0,path:zt.forgotPassword},r.a.createElement(yt,null)),r.a.createElement(c.b,{exact:!0,path:zt.changePassword(":token")},r.a.createElement(Rt,null)),r.a.createElement(c.b,{exact:!0,path:zt.confirmEmail(":token")},r.a.createElement(Bt,null)),r.a.createElement(He,{exact:!0,path:zt.dashboard},r.a.createElement(Ft,null,r.a.createElement(dt,null))),r.a.createElement(He,{exact:!0,path:zt.analytics},r.a.createElement(Ft,null,r.a.createElement(ht,null))),r.a.createElement(He,{exact:!0,path:zt.budget},r.a.createElement(Ft,null,r.a.createElement("p",null,"Budget placeholder"))),r.a.createElement(He,{exact:!0,path:zt.settings},r.a.createElement(Ft,null,r.a.createElement(ft,null))),r.a.createElement(c.b,{exact:!0,path:"/v"},"Version number 0.0.1"),r.a.createElement(c.b,{path:"/"},r.a.createElement(c.a,{to:zt.dashboard})))}var Yt=function(){var e=Re((function(e){return e.auth.getProfile}));return Object(a.useEffect)((function(){e()}),[e]),r.a.createElement(Ut,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Gt=n(74),Vt=n(631),Ht=n(36),Jt=n(394),Zt=n(43);function $t(e,t){var n=getComputedStyle(document.documentElement).getPropertyValue("--"+e);return t&&t.color,n}var Kt=Object(Jt.a)({palette:{primary:Object(q.a)(Object(q.a)({},Zt.a.deepPurple),{},{main:$t("color-primary-main",{color:!0}),dark:$t("color-primary-dark",{color:!0}),light:$t("color-primary-light",{color:!0}),50:$t("color-primary-50",{color:!0}),100:$t("color-primary-100",{color:!0}),200:$t("color-primary-200",{color:!0}),300:$t("color-primary-300",{color:!0}),400:$t("color-primary-400",{color:!0}),500:$t("color-primary-500",{color:!0}),600:$t("color-primary-600",{color:!0}),700:$t("color-primary-900",{color:!0}),800:$t("color-primary-800",{color:!0}),900:$t("color-primary-700",{color:!0}),contrastText:"#fff"})}});var Qt=n(393);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I.a,{store:Le},r.a.createElement(Vt.a,{theme:Kt},r.a.createElement(Ht.a,{utils:Qt.a},r.a.createElement(Gt.a,null,r.a.createElement(Yt,null)))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[404,1,2]]]);
//# sourceMappingURL=main.a9715d2d.chunk.js.map
(this.webpackJsonpexpence=this.webpackJsonpexpence||[]).push([[0],{343:function(e,t,n){e.exports=n.p+"static/media/logo_google.696b80ec.png"},358:function(e,t,n){e.exports=n.p+"static/media/pexels-johannes-plenio-1103970.afe78909.jpg"},368:function(e,t,n){e.exports=n(521)},369:function(e,t,n){},370:function(e,t,n){},376:function(e,t,n){},377:function(e,t,n){},400:function(e,t){},402:function(e,t){},416:function(e,t){},418:function(e,t){},446:function(e,t){},448:function(e,t){},449:function(e,t){},455:function(e,t){},457:function(e,t){},475:function(e,t){},477:function(e,t){},489:function(e,t){},492:function(e,t){},510:function(e,t,n){},511:function(e,t,n){},512:function(e,t,n){},513:function(e,t,n){},514:function(e,t,n){},515:function(e,t,n){},516:function(e,t,n){},517:function(e,t,n){},518:function(e,t,n){},519:function(e,t,n){},520:function(e,t,n){},521:function(e,t,n){"use strict";n.r(t);n(369),n(370);var r=n(0),a=n.n(r),i=n(19),o=n.n(i),c=n(23),u=n(2),s=n.n(u),l=n(6),d=n(17),f=n(48),m=(n(376),n(34)),p=n(57),h=(n(377),n(43)),v=n.n(h);function g(e,t){var n,r,a;return v()(t.className,e,{clickable:!!t.onClick},{error:!!t.error},"weight-".concat(null!==(n=t.weight)&&void 0!==n?n:"default"),"padding-".concat(null!==(r=t.padding)&&void 0!==r?r:"none"),"color-".concat(null!==(a=t.color)&&void 0!==a?a:"default"))}function b(e){e.error,e.weight,e.color,e.padding,e.className,e.children;return Object(f.a)(e,["error","weight","color","padding","className","children"])}var E={H1:function(e){return a.a.createElement("h1",Object.assign({},b(e),{className:g("Text Header H1",e)}),e.children)},H2:function(e){return a.a.createElement("h2",Object.assign({},b(e),{className:g("Text Header H2",e)}),e.children)},H3:function(e){return a.a.createElement("h3",Object.assign({},b(e),{className:g("Text Header H3",e)}),e.children)},H4:function(e){return a.a.createElement("h4",Object.assign({},b(e),{className:g("Text Header H4",e)}),e.children)},H5:function(e){return a.a.createElement("h5",Object.assign({},b(e),{className:g("Text Header H5",e)}),e.children)},H6:function(e){return a.a.createElement("h6",Object.assign({},b(e),{className:g("Text Header H6",e)}),e.children)}},y=function(e){return a.a.createElement("p",Object.assign({},function(e){return e.error,e.weight,e.color,e.padding,e.className,e.children,Object(f.a)(e,["error","weight","color","padding","className","children"])}(e),{className:g("Text Paragraph",e)}),e.children)},w=n(549),j=n(555),O=n(557),k=n(531),x=n(560),S=n(343),T=n.n(S),N=n(556),C=n(558),D=n(559),A=function(e){var t,n,i=Object(r.useState)(!1),o=Object(d.a)(i,2),c=o[0],u=o[1],s=Object(m.c)({resolver:Object(p.a)(Ae)}),l=s.register,h=s.handleSubmit,v=s.errors,g=s.formState,b=(Object(f.a)(s,["register","handleSubmit","errors","formState"]),g.touched.email&&(null===(t=v.email)||void 0===t?void 0:t.message)),S=g.touched.password&&(null===(n=v.password)||void 0===n?void 0:n.message);return a.a.createElement("div",{className:"Login AuthView"},a.a.createElement("div",{className:"container"},a.a.createElement("header",null,a.a.createElement(E.H5,{weight:"bold",padding:"sm",color:"white"},"Login to Expence")),a.a.createElement("div",{className:"content"},a.a.createElement("form",{noValidate:!0,onSubmit:h(e.handleSubmit)},a.a.createElement(w.a,{id:"login-email",name:"email",type:"text",inputRef:l,label:"Email",variant:"outlined",error:!!b,helperText:b,fullWidth:!0,InputProps:{endAdornment:a.a.createElement(j.a,{position:"end"},a.a.createElement(N.a,null))}}),a.a.createElement(w.a,{id:"login-password",name:"password",type:c?"text":"password",inputRef:l,label:"Password",variant:"outlined",error:!!S,helperText:S,fullWidth:!0,InputProps:{endAdornment:a.a.createElement(j.a,{position:"end"},a.a.createElement(O.a,{onClick:function(){return u((function(e){return!e}))},size:"small"},c?a.a.createElement(C.a,null):a.a.createElement(D.a,null)))}}),a.a.createElement(k.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0},"Login"),e.error?a.a.createElement(y,{error:!0},e.error):null,a.a.createElement(k.a,{variant:"outlined",onClick:function(){return e.handleGoogleSubmit()},startIcon:a.a.createElement("img",{className:"logo",src:T.a,alt:"Google Logo"}),fullWidth:!0},"Log in with Google")),a.a.createElement(x.a,null),a.a.createElement("div",{className:"signInOptions"},a.a.createElement(k.a,{onClick:function(){return e.handleCreateAccount()}},"Create account"),a.a.createElement(k.a,{onClick:function(){return e.handleForgotPassword()}},"Forgot password")))))},P=n(14),I=n(8),F=n(30),M=function e(t){var n,r,a,i;Object(F.a)(this,e),this.id=void 0,this.displayName=void 0,this.email=void 0,this.photoUrl=void 0,this.googleId=void 0,this.id=t.id,this.displayName=null!==(n=t.displayName)&&void 0!==n?n:void 0,this.email=null!==(r=t.email)&&void 0!==r?r:void 0,this.photoUrl=null!==(a=t.photoUrl)&&void 0!==a?a:void 0,this.googleId=null!==(i=t.googleId)&&void 0!==i?i:void 0},L=Object(P.b)({id:Object(P.d)().required().min(1),displayName:Object(P.d)(),photoUrl:Object(P.d)(),email:Object(P.d)(),googleId:Object(P.d)()}).required();function R(e){try{return L.isValidSync(e),!0}catch(t){return!1}}var W={initialized:!1,_setInitialized:Object(I.b)((function(e,t){e.initialized=t})),user:null,isLoggedIn:Object(I.c)((function(e){return Boolean(e.user)})),accessToken:null,_setAccessToken:Object(I.b)((function(e,t){e.accessToken=t})),_login:Object(I.b)((function(e,t){R(t)&&(e.user=new M(t))})),getProfile:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,e.next=3,a.authService.getProfile();case 3:return(i=e.sent).onSuccess((function(e){t._login(e)})),t._setInitialized(!0),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),loginWithGoogle:Object(I.f)((function(e,t,n){return n.injections.authService.loginWithGoogle()})),loginWithEmailPassword:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,e.next=3,a.authService.loginWithEmailAndPassword(n);case 3:return(i=e.sent).onSuccess(Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.authService.getProfile();case 2:e.sent.onSuccess((function(e){t._login(e)}));case 4:case"end":return e.stop()}}),e)})))),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),registerWithEmailPassword:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,e.next=3,a.authService.registerWithEmailAndPassword(n);case 3:return(i=e.sent).onSuccess(Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.authService.getProfile();case 2:e.sent.onSuccess((function(e){t._login(e)}));case 4:case"end":return e.stop()}}),e)})))),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),forgotPassword:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,e.next=3,a.authService.forgotPassword(n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),logout:Object(I.f)((function(e,t,n){return n.injections.authService.logout()}))},q=n(31),_=n(581),H=function(){function e(t){if(Object(F.a)(this,e),this.integer=void 0,Math.floor(t)!==t)throw new Error("Cannot construct money amount from non-integer value");this.integer=t}return Object(q.a)(e,[{key:"add",value:function(t){return new e(this.integer+t.integer)}},{key:"subtract",value:function(t){return new e(this.integer-t.integer)}},{key:"decimal",get:function(){return this.integer/100}},{key:"unsignedDecimal",get:function(){return Math.abs(this.decimal)}},{key:"unsignedInteger",get:function(){return Math.abs(this.integer)}},{key:"euros",get:function(){return this.integer>0?Math.floor(this.integer/100):Math.ceil(this.integer/100)}},{key:"formatEuros",get:function(){return Math.abs(this.euros).toFixed(0).split("").reverse().map((function(e,t){return t%3===2?" "+e:e})).reverse().join("")}},{key:"cents",get:function(){return Math.floor(this.integer%100)}},{key:"formatCents",get:function(){return Math.abs(this.cents).toFixed(0).padStart(2,"0")}},{key:"sign",get:function(){return 0===this.integer?0:this.integer>0?1:-1}},{key:"formatSign",get:function(){return 0===this.integer?"\xb1":this.integer>0?"+":"-"}},{key:"formatFull",get:function(){return"".concat(this.formatSign," ").concat(this.formatEuros,".").concat(this.formatCents," \u20ac")}},{key:"isPositive",get:function(){return this.sign>=0}},{key:"isNegative",get:function(){return this.sign<0}}],[{key:"sum",value:function(t){return t.reduce((function(e,t){return e.add(t)}),new e(0))}}]),e}(),B=function(){function e(t){Object(F.a)(this,e),this.date=void 0,this.category=void 0,this.comment=void 0,this.amount=void 0,this.id=void 0,this.uid=void 0,this.date=new Date(t.time),this.comment=t.comment||"",this.category=t.category,this.amount=new H(Math.floor(t.integerAmount)),this.id=t.id||_.a(),this.uid=t.uid}return Object(q.a)(e,[{key:"toJson",value:function(){return{time:this.date.getTime(),category:this.category,comment:this.comment,integerAmount:this.amount.integer,id:this.id,uid:this.uid}}}]),e}(),U=n(18),G=n(21),z=n(36),V=n(561),K=n(562);function J(e,t,n){var r=e.reduce((function(e,n){var r,a=function(e){var n=t(e);return V.a(n,"yyyy-MM-dd")}(n);return Object(z.a)(Object(z.a)({},e),{},Object(U.a)({},a,[].concat(Object(G.a)(null!==(r=e[a])&&void 0!==r?r:[]),[n])))}),{}),a=Object.entries(r).map((function(e){return{date:K.a(new Date(e[0])),items:e[1]}}));return(null===n||void 0===n?void 0:n.sort)?a.sort((function(e,t){return t.date.getTime()-e.date.getTime()})):a}function Y(e,t,n){var r=$(e),a=$(n);switch(t){case"<":return r<a;case"<=":return r<=a;case"==":return r===a;case">=":return r>=a;case">":return r>a}}function $(e){return 341*e.getFullYear()+31*e.getMonth()+e.getDate()}var Q={items:Object(I.c)([function(e,t){return t.transactions.items},function(e,t){return t.interval.startDate},function(e,t){return t.interval.endDate}],(function(e,t,n){return e.filter((function(e){return!Y(e.date,"<",t)&&!Y(e.date,">",n)}))})),itemsByDates:Object(I.c)([function(e,t){return t.transactions.filtered.items}],(function(e){return J(e,(function(e){return e.date}),{sort:!0})})),count:Object(I.c)([function(e,t){return t.transactions.filtered.items}],(function(e){return e.length})),sums:Object(I.c)([function(e,t){return t.transactions.filtered.items}],(function(e){var t=e.filter((function(e){return e.amount.integer>0})).reduce((function(e,t){return e+t.amount.integer}),0),n=e.filter((function(e){return e.amount.integer<0})).reduce((function(e,t){return e+t.amount.integer}),0);return{all:new H(t+n),incomes:new H(t),expenses:new H(n)}}))},X={items:[],itemsByDates:Object(I.c)((function(e){return J(e.items,(function(e){return e.date}),{sort:!0})})),count:Object(I.c)((function(e){return e.items.length})),sums:Object(I.c)((function(e){var t=e.items.filter((function(e){return e.amount.integer>0})).reduce((function(e,t){return e+t.amount.integer}),0),n=e.items.filter((function(e){return e.amount.integer<0})).reduce((function(e,t){return e+t.amount.integer}),0);return{all:new H(t+n),incomes:new H(t),expenses:new H(n)}})),filtered:Q,categories:Object(I.c)((function(e){return e.items.map((function(e){return e.category})).filter((function(e,t,n){return n.indexOf(e)===t}))})),getTransactions:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,e.next=3,a.transactionService.getTransactions();case 3:return(i=e.sent).onSuccess((function(e){return t._getTransactions(e)})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),_getTransactions:Object(I.b)((function(e,t){e.items=t.map((function(e){return new B(e)}))})),postTransaction:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,e.next=3,a.transactionService.postTransaction(n);case 3:return(i=e.sent).onSuccess((function(e){return t._postTransaction(e)})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),_postTransaction:Object(I.b)((function(e,t){e.items.push(new B(t))})),deleteTransaction:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,e.next=3,a.transactionService.deleteTransaction(n);case 3:return(i=e.sent).onSuccess((function(){return t.deleteTransaction(n)})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),_deleteTransaction:Object(I.b)((function(e,t){e.items=e.items.filter((function(e){return e.id!==t}))})),putTransaction:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,e.next=3,a.transactionService.putTransaction(n);case 3:return(i=e.sent).onSuccess((function(e){return t._putTransaction(e)})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),_putTransaction:Object(I.b)((function(e,t){e.items=e.items.map((function(e){return e.id===t.id?new B(t):e}))})),patchTransaction:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,e.next=3,a.transactionService.patchTransaction(n);case 3:return(i=e.sent).onSuccess((function(e){return t._patchTransaction(e)})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),_patchTransaction:Object(I.b)((function(e,t){e.items=e.items.map((function(e){return e.id===t.id?new B(t):e}))})),onAuthChanged:Object(I.g)((function(e,t){return[t.auth.logout,t.auth._login]}),(function(e,t){var n=Object(d.a)(t.resolvedTargets,2),r=n[0],a=n[1];switch(t.type){case r:e._clearTransactions();break;case a:e.getTransactions()}})),_clearTransactions:Object(I.b)((function(e){e.items=[]}))},Z={isOpen:!1,setOpen:Object(I.b)((function(e,t){e.isOpen=t})),open:Object(I.b)((function(e){e.isOpen=!0})),close:Object(I.b)((function(e){e.isOpen=!1}))},ee=n(563),te=n(354),ne=n(564),re=n(355),ae=n(565),ie=n(566),oe=n(582),ce={startDate:ee.a(new Date),endDate:te.a(new Date),setStartDate:Object(I.b)((function(e,t){if(Y(t,">",e.endDate))throw new Error("Start date cannot be after end date");e.startDate=t})),setEndDate:Object(I.b)((function(e,t){if(Y(t,"<",e.startDate))throw new Error("End date cannot be before start date");e.endDate=t})),setInterval:Object(I.b)((function(e,t){if(Y(t.startDate,">",t.endDate))throw new Error("End date cannot be before start date");e.startDate=t.startDate,e.endDate=t.endDate})),setPreviousMonthAsDateInterval:Object(I.b)((function(e){var t=ee.a(e.startDate),n=ne.a(t,1);e.startDate=ee.a(n),e.endDate=te.a(n)})),setNextMonthAsDateInterval:Object(I.b)((function(e){var t=te.a(e.endDate),n=re.a(t,1);e.startDate=ee.a(n),e.endDate=te.a(n)})),dateIntervalIsMonth:Object(I.c)((function(e){return ae.a(e.startDate,e.endDate)&&ie.a(e.startDate)&&oe.a(e.endDate)})),dateIntervalMonthString:Object(I.c)((function(e){if(e.dateIntervalIsMonth){var t=e.startDate.toLocaleDateString("en-EN",{month:"long"}),n=e.startDate.toLocaleDateString("en-EN",{year:"numeric"});return"".concat(t,", ").concat(n)}}))},ue=n(127),se=n(126),le=n(356),de=n.n(le),fe=function(){function e(){Object(F.a)(this,e)}return Object(q.a)(e,null,[{key:"API_URL",get:function(){return"https://expenceapp.herokuapp.com"}}]),e}(),me=n(357),pe=n.n(me),he=function(){function e(t){Object(F.a)(this,e),this.message=void 0,this.status=void 0,this.code=void 0,this.data=void 0,this.message=t.message,this.status=t.status,this.code=t.code,this.data=t.data}return Object(q.a)(e,null,[{key:"fromAxiosError",value:function(t){if(t.response){var n=t.response.data;return new e({status:t.response.status,message:(null===n||void 0===n?void 0:n.message)&&"string"===typeof n.message?n.message:"Unknown server error",code:(null===n||void 0===n?void 0:n.code)&&"string"===typeof n.code?n.code:"server/unknown",data:(null===n||void 0===n?void 0:n.errors)&&"object"===typeof n.errors?{errors:n.errors}:{}})}return t.request?new e({status:21,code:"server/unavailable",message:"Could not reach server",data:{}}):new e({status:22,code:"server/failure-formulating-request",message:"Could not formulate request to server",data:{}})}}]),e}();function ve(e){return e.then((function(e){return new ge(e)})).catch((function(e){return new be(e)}))}var ge=function(){function e(t){Object(F.a)(this,e),this.value=void 0,this.value=t}return Object(q.a)(e,[{key:"getOr",value:function(e){return this.value}},{key:"isSuccess",value:function(){return!0}},{key:"isFailure",value:function(){return!1}},{key:"onSuccess",value:function(e){e(this.value)}},{key:"onFailure",value:function(e){}},{key:"map",value:function(e){return e(this.value)}},{key:"mapSuccess",value:function(t){return new e(t(this.value))}},{key:"mapFailure",value:function(t){return new e(this.value)}},{key:"transform",value:function(t,n,r){return t(this.value)?new e(n(this.value).value):new be(r(this.value).value)}},{key:"ensureType",value:function(t,n,r){var a=t(this.value);return n(a)?new e(a):r(a)}}],[{key:"From",value:function(t){return new e(t)}},{key:"Empty",value:function(){return new e(void 0)}}]),e}(),be=function(){function e(t){Object(F.a)(this,e),this.value=void 0,this.value=t}return Object(q.a)(e,[{key:"getOr",value:function(e){return e}},{key:"onSuccess",value:function(e){}},{key:"onFailure",value:function(e){e(this.value)}},{key:"isSuccess",value:function(){return!1}},{key:"isFailure",value:function(){return!0}},{key:"map",value:function(t){return new e(this.value)}},{key:"mapSuccess",value:function(t){return new e(this.value)}},{key:"mapFailure",value:function(t){return new e(t(this.value))}},{key:"transform",value:function(t,n,r){return new e(this.value)}},{key:"ensureType",value:function(t,n,r){return new e(this.value)}}],[{key:"Problem",value:function(t){return new e(new he(t))}}]),e}(),Ee=function(){function e(){Object(F.a)(this,e),this.baseURL=void 0,this.axios=void 0,this.baseURL="".concat(fe.API_URL,"/api"),this.axios=de.a.create({baseURL:this.baseURL,withCredentials:!0})}return Object(q.a)(e,[{key:"endpoint",value:function(e){return"".concat(this.baseURL).concat(e)}},{key:"isAccessTokenValid",value:function(){var e=Se.getState().auth.accessToken;if(!e)return!1;try{var t=pe.a.decode(e),n=1e3*Number((null===t||void 0===t?void 0:t.exp)||0);return Date.now()<n-5e3}catch(r){return console.warn("Error occured while checking access token",r),!1}}},{key:"attemptRefreshAccessToken",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r,a,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]&&i[0],this.isAccessTokenValid()&&!t){e.next=15;break}return n=this.endpoint("/auth/refresh_token"),e.prev=4,e.next=7,this.axios.get(n);case 7:r=e.sent,a=r.data,Se.getActions().auth._setAccessToken(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),Se.getState().auth.accessToken&&Se.getActions().auth.logout();case 15:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"onBeforeRequest",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.attemptRefreshAccessToken();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(e){var t=Se.getState().auth.accessToken,n=Object(z.a)({},null===e||void 0===e?void 0:e.headers);return t&&(n.Authorization="bearer ".concat(t)),Object(z.a)(Object(z.a)({},e),{},{headers:n})}},{key:"handleRequest",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,i,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onBeforeRequest();case 2:return a=this.endpoint(t),i=this.getConfig(n),o=r(a,i),e.next=7,ve(o);case 7:return c=e.sent,e.abrupt("return",c.mapFailure((function(e){return he.fromAxiosError(e)})));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest(t,n,(function(e,t){return r.axios.get(e,t)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest(t,r,(function(e,t){return a.axios.post(e,n,t)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest(t,n,(function(e,t){return r.axios.delete(e,t)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest(t,r,(function(e,t){return a.axios.put(e,n,t)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest(t,r,(function(e,t){return a.axios.patch(e,n,t)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}(),ye=function(e){Object(ue.a)(n,e);var t=Object(se.a)(n);function n(){return Object(F.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"getProfile",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/auth/profile");case 2:return t=e.sent,e.abrupt("return",t.ensureType((function(e){return e.data}),R,(function(e){return be.Problem({status:23,code:"auth/profile/invalid-response",message:"Invalid profile response from server",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"registerWithEmailAndPassword",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/auth/register",t);case 2:return n=e.sent,e.abrupt("return",n.transform((function(e){return 200===e.status}),(function(){return ge.Empty()}),(function(e){return be.Problem({status:23,code:"auth/register/invalid-response",message:"Invalid registration response from server",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithEmailAndPassword",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/auth/login",t);case 2:return n=e.sent,e.abrupt("return",n.transform((function(e){return 200===e.status}),(function(){return ge.Empty()}),(function(e){return be.Problem({status:23,code:"auth/login/invalid-response",message:"Invalid login response from server",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/auth/forgot_password",t);case 2:return n=e.sent,e.abrupt("return",n.transform((function(e){return 200===e.status}),(function(){return ge.Empty()}),(function(e){return be.Problem({status:23,code:"auth/forgotpassword/invalid-response",message:"Invalid forgot password response from server",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithGoogle",value:function(){window.location.href=this.endpoint("/auth/google")}},{key:"logout",value:function(){window.location.href=this.endpoint("/auth/logout")}}]),n}(Ee),we=Object(P.b)({id:Object(P.d)().required(),uid:Object(P.d)().required(),time:Object(P.a)().positive().integer().required(),category:Object(P.d)().min(1).required(),integerAmount:Object(P.a)().integer().required(),comment:Object(P.d)()}).required();function je(e){try{return we.validateSync(e),!0}catch(t){return!1}}function Oe(e){return Array.isArray(e)&&e.every(je)}var ke=function(e){Object(ue.a)(n,e);var t=Object(se.a)(n);function n(){return Object(F.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"getTransactions",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/transactions");case 2:return t=e.sent,e.abrupt("return",t.ensureType((function(e){return e.data}),Oe,(function(e){return be.Problem({status:23,code:"transactions/get/invalid-response",message:"Could not get transactions, received invalid response.",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"postTransaction",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/transactions",t);case 2:return n=e.sent,e.abrupt("return",n.ensureType((function(e){return e.data}),je,(function(e){return be.Problem({status:23,code:"transactions/post/invalid-response",message:"Could not post transaction, received invalid response.",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTransaction",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/transactions/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.transform((function(e){return 200===e.status}),(function(){return ge.Empty()}),(function(e){return be.Problem({status:23,code:"transactions/delete/invalid-response",message:"Could not delete transaction, received invalid response.",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"putTransaction",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.put("/transactions/".concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.ensureType((function(e){return e.data}),je,(function(e){return be.Problem({status:23,code:"transactions/put/invalid-response",message:"Could not put transaction, received invalid response.",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"patchTransaction",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.patch("/transactions/".concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.ensureType((function(e){return e.data}),je,(function(e){return be.Problem({status:23,code:"transactions/patch/invalid-response",message:"Could not patch transaction, received invalid response.",data:e.data})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ee),xe={transactions:X,interval:ce,transactionForm:Z,auth:W},Se=Object(I.d)(xe,{injections:{authService:new ye,transactionService:new ke}});var Te=Object(I.e)(),Ne=Te.useStoreActions,Ce=(Te.useStoreDispatch,Te.useStoreState);Te.useStore;function De(){var e=Object(c.g)();return function(t){return e.push("string"===typeof t?t:t(kt))}}var Ae=P.b({email:P.d().defined().min(3).max(255).email(),password:P.d().defined().min(3).max(255)}).defined(),Pe=function(){var e=Object(r.useState)(),t=Object(d.a)(e,2),n=t[0],i=t[1],o=De(),c=Ne((function(e){return e.auth.loginWithGoogle})),u=Ne((function(e){return e.auth.loginWithEmailPassword}));function f(){return(f=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(void 0),e.next=3,u(t);case 3:(n=e.sent).onSuccess((function(){return o((function(e){return e.dashboard}))})),n.onFailure((function(e){switch(e.code){case"data/invalid-request-data":i("Invalid email or password.");break;case"auth/invalid-credentials":i("Wrong password or the user does not have a password.");break;case"auth/user-not-found":i("No user exists with that email.");break;case"server/unavailable":i("Could not contact server. Try again later.");break;default:console.warn("Uncaught error code in login:",e),i("An error occured while logging in. Try again.")}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o((function(e){return e.forgotPassword}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o((function(e){return e.register}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement(A,{handleGoogleSubmit:function(){return m.apply(this,arguments)},handleSubmit:function(e){return f.apply(this,arguments)},handleForgotPassword:function(){return p.apply(this,arguments)},handleCreateAccount:function(){return h.apply(this,arguments)},error:n})},Ie=(n(510),function(e){var t,n,i=Object(r.useState)(!1),o=Object(d.a)(i,2),c=o[0],u=o[1],s=Object(m.c)({resolver:Object(p.a)(Fe)}),l=s.register,f=s.handleSubmit,h=s.errors,v=s.formState,g=v.touched.email&&(null===(t=h.email)||void 0===t?void 0:t.message),b=v.touched.password&&(null===(n=h.password)||void 0===n?void 0:n.message);return a.a.createElement("div",{className:"Register AuthView"},a.a.createElement("div",{className:"container"},a.a.createElement("header",null,a.a.createElement(E.H5,{weight:"bold",color:"white"},"Create account")),a.a.createElement("div",{className:"content"},a.a.createElement("form",{noValidate:!0,onSubmit:f(e.handleSubmit)},a.a.createElement(w.a,{id:"register-email",name:"email",type:"text",inputRef:l,label:"Email",variant:"outlined",error:!!g,helperText:g,fullWidth:!0,InputProps:{endAdornment:a.a.createElement(j.a,{position:"end"},a.a.createElement(N.a,null))}}),a.a.createElement(w.a,{id:"register-password",name:"password",type:c?"text":"password",inputRef:l,label:"Password",variant:"outlined",error:!!b,helperText:b,fullWidth:!0,InputProps:{endAdornment:a.a.createElement(j.a,{position:"end"},a.a.createElement(O.a,{onClick:function(){return u((function(e){return!e}))},size:"small"},c?a.a.createElement(C.a,null):a.a.createElement(D.a,null)))}}),a.a.createElement(k.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0},"Create account"),e.error?a.a.createElement(y,{error:!0},e.error):null),a.a.createElement(x.a,null),a.a.createElement("div",{className:"options"},a.a.createElement(k.a,{onClick:function(){return e.handleLogin()}},"Already have an account? Login")))))}),Fe=Object(P.b)({email:Object(P.d)().defined().max(255).email(),password:Object(P.d)().defined().min(5).max(255),repeatPassword:Object(P.d)().defined().oneOf([Object(P.c)("password")],"passwords must match")}).defined(),Me=function(){var e=Object(r.useState)(),t=Object(d.a)(e,2),n=t[0],i=t[1],o=De(),c=Ne((function(e){return e.auth.loginWithGoogle})),u=Ne((function(e){return e.auth.registerWithEmailPassword}));function f(){return(f=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(void 0),e.next=3,u({email:t.email,password:t.password});case 3:(n=e.sent).onSuccess((function(){return o((function(e){return e.dashboard}))})),n.onFailure((function(e){switch(e.code){case"data/invalid-request-data":i("Invalid email or password.");break;case"auth/user-already-exists":i("An user already exists with that email.");break;case"server/unavailable":i("Could not contact server. Try again later.");break;default:console.warn("Uncaught error code in login:",e),i("An error occured while logging in. Try again.")}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o((function(e){return e.login}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement(Ie,{handleGoogleSubmit:function(){return m.apply(this,arguments)},handleLogin:function(){return p.apply(this,arguments)},handleSubmit:function(e){return f.apply(this,arguments)},error:n})},Le=(n(511),n(512),n(567)),Re=n(568),We=n(569),qe=n(570),_e=n(571);function He(e){var t=Object(r.useMemo)((function(){return window.matchMedia(e)}),[e]),n=Object(r.useState)(!1),a=Object(d.a)(n,2),i=a[0],o=a[1],c=Object(r.useCallback)((function(){o(t.matches)}),[t]);return Object(r.useEffect)((function(){return c(),t.addEventListener("change",c),function(){t.removeEventListener("change",c)}}),[t,c]),i}function Be(){var e=De(),t=Ne((function(e){return e.transactionForm.open})),n=He("(min-width: ".concat(600,"px)")),r=Object(c.h)(kt.dashboard),i=Object(c.h)(kt.analytics),o=Object(c.h)(kt.budget),u=Object(c.h)(kt.settings);return a.a.createElement("div",{className:"AppTabs"},a.a.createElement("div",{className:"tabContainer"},a.a.createElement("button",{onClick:function(){return e((function(e){return e.dashboard}))},className:v()("tab",{active:!!r})},a.a.createElement(Le.a,null),a.a.createElement("span",null,"Dashboard")),a.a.createElement("button",{onClick:function(){return e((function(e){return e.analytics}))},className:v()("tab",{active:!!i})},a.a.createElement(Re.a,null),a.a.createElement("span",null,"Analytics")),n?a.a.createElement("button",{onClick:function(){return t()},className:v()("tab","addTab")},a.a.createElement(We.a,null),a.a.createElement("span",null,"New transaction")):a.a.createElement("div",{className:"plusButtonContainer"},a.a.createElement("svg",{version:"1.1",x:"0px",y:"0px",width:"108px",height:"60px",viewBox:"0 0 108 60"},a.a.createElement("path",{d:Ue})),a.a.createElement("button",{onClick:function(){return t()},className:"plusButton"},a.a.createElement(We.a,null))),a.a.createElement("button",{onClick:function(){return e((function(e){return e.budget}))},className:v()("tab",{active:!!o})},a.a.createElement(qe.a,null),a.a.createElement("span",null,"Budget")),a.a.createElement("button",{onClick:function(){return e((function(e){return e.settings}))},className:v()("tab",{active:!!u})},a.a.createElement(_e.a,null),a.a.createElement("span",null,"Settings"))))}var Ue="M80.2,23.4C72.9,30.7,64.4,35,54,35s-18.9-4.3-26.2-11.6C20.5,16.1,10,0,0,0v60h54h54V0C98, 0, 87.5, 16.1, 80.2, 23.4z",Ge=(n(513),n(533));function ze(e){var t,n,r,i=Object(m.c)({resolver:Object(p.a)(Ve)}),o=i.register,c=i.handleSubmit,u=i.errors,s=i.formState,l=s.touched.integerAmount&&(null===(t=u.integerAmount)||void 0===t?void 0:t.message),d=s.touched.category&&(null===(n=u.category)||void 0===n?void 0:n.message),f=s.touched.comment&&(null===(r=u.comment)||void 0===r?void 0:r.message);return a.a.createElement(Ge.a,{open:e.open,onClose:function(){return e.handleClose()}},a.a.createElement("div",{className:"TransactionFormModal"},a.a.createElement("form",{onSubmit:c(e.handleSubmit)},a.a.createElement("p",null,"Integer amount"),a.a.createElement("input",{type:"number",id:"integerAmount",name:"integerAmount",ref:o}),a.a.createElement("p",{style:{color:"#FF6622"}},l),a.a.createElement("p",null,"Category"),a.a.createElement("input",{type:"text",id:"category",name:"category",ref:o}),a.a.createElement("p",{style:{color:"#FF6622"}},d),a.a.createElement("p",null,"Comment"),a.a.createElement("input",{type:"text",id:"comment",name:"comment",ref:o}),a.a.createElement("p",{style:{color:"#FF6622"}},f),a.a.createElement("button",{type:"submit"},"submit"))))}var Ve=Object(P.b)({comment:Object(P.d)(),category:Object(P.d)().required(),integerAmount:Object(P.a)().required().integer()}).required();function Ke(e){var t=Ce((function(e){return e.transactionForm.isOpen})),n=Ne((function(e){return e.transactionForm.open})),i=Ne((function(e){return e.transactionForm.close})),o=Ne((function(e){return e.transactions.postTransaction}));return function(e,t,n){var a=Object(r.useCallback)((function(n){var r="object"===typeof e?e.key:e;n.key!==r&&n.keyCode!==r||("object"===typeof e&&void 0!==e.shift&&e.shift!==n.shiftKey||"object"===typeof e&&void 0!==e.alt&&e.alt!==n.altKey||("object"!==typeof e||void 0===e.ctrl||e.ctrl===n.ctrlKey)&&t())}),[e,t]);Object(r.useEffect)((function(){var e=!0===(null===n||void 0===n?void 0:n.if)||void 0===(null===n||void 0===n?void 0:n.if),t=!0===(null===n||void 0===n?void 0:n.ifNot)||void 0===(null===n||void 0===n?void 0:n.ifNot);if(e&&t)return Boolean(null===n||void 0===n?void 0:n.onKeyUp)?(window.addEventListener("keyup",a),function(){return window.removeEventListener("keyup",a)}):(window.addEventListener("keydown",a),function(){return window.removeEventListener("keydown",a)})}),[n,a])}({key:32,shift:!1,ctrl:!0,alt:!1},Object(r.useCallback)((function(){n()}),[n])),a.a.createElement(ze,{open:t,handleClose:function(){i()},handleSubmit:function(e){o(Object(z.a)(Object(z.a)({},e),{},{time:Date.now()}))}})}function Je(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ke,null),a.a.createElement("div",{className:"AppLayout"},a.a.createElement("div",{className:"appTabsContainer"},a.a.createElement(Be,null)),a.a.createElement("div",{className:"childrenContainer"},e.children)))}function Ye(e){var t=e.fallbackRoute,n=Object(f.a)(e,["fallbackRoute"]),r=kt.login,i=Ce((function(e){return e.auth.initialized})),o=Ce((function(e){return e.auth.isLoggedIn}));return i?o?a.a.createElement(c.b,n):a.a.createElement(c.a,{to:t||r}):null}n(514),n(515),n(516);var $e=n(572);function Qe(e){var t=e.transaction.amount.isPositive?"positive":"negative";return a.a.createElement("div",{className:"TransactionListing"},a.a.createElement("div",{className:v()("icon",t)},a.a.createElement("div",{className:"iconContainer"},e.transaction.amount.isPositive?a.a.createElement(We.a,null):a.a.createElement($e.a,null))),a.a.createElement("div",{className:"category"},a.a.createElement("span",null,e.transaction.category)),a.a.createElement("div",{className:"comment"},a.a.createElement("span",null,e.transaction.comment)),a.a.createElement("div",{className:v()("amount",t)},a.a.createElement("span",null,e.transaction.amount.formatFull)))}function Xe(e){var t=Ne((function(e){return e.transactions.deleteTransaction})),n=Object(r.useCallback)((function(){t(e.transaction.id)}),[e.transaction,t]);return a.a.createElement(Qe,{transaction:e.transaction,handleDelete:n})}var Ze=n(580);function et(e){var t=Ne((function(e){return e.transactions.deleteTransaction}));return a.a.createElement("div",{className:"TransactionList"},a.a.createElement("ul",null,e.itemsByDates.map((function(e){var n,r=(n=e.date).getFullYear()===tt?Object(Ze.a)(n,"dd.MM."):Object(Ze.a)(n,"dd.MM.yyyy");return a.a.createElement("li",{key:r},a.a.createElement("p",null,r),a.a.createElement("ul",null,e.items.map((function(e){return a.a.createElement("li",{key:e.id,onClick:function(){t(e.id).catch((function(e){console.log("Error deleting:",e)}))}},a.a.createElement(Xe,{transaction:e}))}))))}))))}var tt=(new Date).getFullYear();function nt(e){var t=Ce((function(e){return e.transactions.itemsByDates})),n=Ce((function(e){return e.transactions.filtered.itemsByDates}));return a.a.createElement(et,{itemsByDates:e.bypassFilters?t:n})}var rt=n(577),at=n(578),it=(n(517),n(573)),ot=n(574),ct=n(575),ut=n(576);function st(e){return a.a.createElement("div",{className:"TransactionListFilters"},a.a.createElement("div",{className:"left"},a.a.createElement(it.a,{size:"small"},a.a.createElement(k.a,{size:"small",variant:"outlined",onClick:e.onPreviousMonth},a.a.createElement(ot.a,null)),a.a.createElement(k.a,{size:"small",variant:"outlined",onClick:e.onNextMonth},a.a.createElement(ct.a,null)))),a.a.createElement("div",{className:"right"},a.a.createElement(k.a,{variant:"outlined"},a.a.createElement("span",null,"Filter"),a.a.createElement(ut.a,null))))}function lt(e){var t=Ne((function(e){return e.interval.setNextMonthAsDateInterval})),n=Ne((function(e){return e.interval.setPreviousMonthAsDateInterval}));return a.a.createElement(st,{onNextMonth:function(){t()},onPreviousMonth:function(){n()}})}var dt=n(358),ft=n.n(dt),mt={};function pt(e){return a.a.createElement("div",{className:"DashboardTab"},a.a.createElement("header",null,a.a.createElement("img",{src:ft.a,alt:""}),a.a.createElement("h1",null,e.dateIntervalMonthString),a.a.createElement("div",{className:"totals"},a.a.createElement("h2",{className:mt.totalHeader},a.a.createElement("span",null,e.filteredSum.formatSign+" "),a.a.createElement("span",{className:mt.larger},e.filteredSum.formatEuros),a.a.createElement("span",null,"."+e.filteredSum.formatCents+" \u20ac")),a.a.createElement("div",{className:"subtotals"},a.a.createElement("div",{className:"subtotal"},a.a.createElement(rt.a,null),a.a.createElement("span",null,e.filteredIncomesSum.formatFull)),a.a.createElement("div",{className:"subtotal"},a.a.createElement(at.a,null),a.a.createElement("span",null,e.filteredExpensesSum.formatFull))))),a.a.createElement("main",null,a.a.createElement("div",{className:"filters"},a.a.createElement(lt,null)),a.a.createElement("div",{className:"list"},a.a.createElement(nt,null))))}function ht(){var e=Ce((function(e){return e.auth.user})),t=Ce((function(e){return e.interval.dateIntervalIsMonth})),n=Ce((function(e){return e.interval.dateIntervalMonthString})),r=Ce((function(e){return e.transactions.filtered.sums})),i=Ne((function(e){return e.interval.setNextMonthAsDateInterval})),o=Ne((function(e){return e.interval.setPreviousMonthAsDateInterval}));return e?a.a.createElement(pt,{dateIntervalIsMonth:t,dateIntervalMonthString:n,setNextMonthAsDateInterval:function(){return i()},setPreviousMonthAsDateInterval:function(){return o()},filteredSum:r.all,filteredIncomesSum:r.incomes,filteredExpensesSum:r.expenses,user:e}):null}n(518);function vt(e){return a.a.createElement("div",{className:"SettingsTab"},e.user.photoUrl?a.a.createElement("img",{style:{width:64,height:64},alt:"profile",src:e.user.photoUrl}):null,a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Display name"),a.a.createElement("td",null,e.user.displayName)),a.a.createElement("tr",null,a.a.createElement("td",null,"Email"),a.a.createElement("td",null,e.user.email)),a.a.createElement("tr",null,a.a.createElement("td",null,"ID"),a.a.createElement("td",null,e.user.id)),a.a.createElement("tr",null,a.a.createElement("td",null,"Google ID"),a.a.createElement("td",null,e.user.googleId)))),a.a.createElement("button",{onClick:e.handleLogout},"Log out"))}function gt(e){var t=Ce((function(e){return e.auth.user})),n=Ne((function(e){return e.auth.logout}));return t?a.a.createElement(vt,{user:t,handleLogout:function(){n()}}):null}var bt=n(112);n(519);function Et(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),i=n[0],o=n[1],c=Ne((function(e){return e.transactions.postTransaction}));return a.a.createElement("div",{className:"AnalyticsTab"},a.a.createElement("input",{type:"file",accept:".csv",onChange:function(e){if(console.log("Handling change"),!e.target.files)throw new Error("No files array");var t=e.target.files[0];if(!t)throw new Error("No file");var n=new FileReader;n.addEventListener("load",(function(e){if(!e.target)throw new Error("No load event target");if(!e.target.result)throw new Error("Load event target result is null");var t,n=e.target.result.toString().split("\n"),r=Object(bt.a)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a){var i=a.split(";");c({category:i[1],comment:i[3],integerAmount:Number(i[2].replace(/[^\d-]/g,"")),time:new Date(i[0].split(".").reverse().map((function(e){return e.padStart(2,"0")})).join("-")).getTime()})}}}catch(u){r.e(u)}finally{r.f()}o([])})),n.readAsText(t)}}),a.a.createElement("ul",null,i.map((function(e){return a.a.createElement("li",{key:e.id},e.date.toDateString(),": ",e.amount.formatFull," ",e.category," - ",e.comment)}))))}function yt(e){return a.a.createElement(Et,null)}n(520);function wt(e){var t,n=Object(m.c)({resolver:Object(p.a)(jt)}),r=n.register,i=n.handleSubmit,o=n.errors,c=n.formState,u=(Object(f.a)(n,["register","handleSubmit","errors","formState"]),c.touched.email&&(null===(t=o.email)||void 0===t?void 0:t.message));return a.a.createElement("div",{className:"ForgotPassword AuthView"},a.a.createElement("div",{className:"container"},a.a.createElement("header",null,a.a.createElement(E.H5,{weight:"bold",padding:"sm",color:"white"},"Forgot password")),a.a.createElement("div",{className:"content"},e.success?a.a.createElement(y,null,"Recovery email sent. Check your email."):a.a.createElement("form",{noValidate:!0,onSubmit:i(e.handleSubmit)},a.a.createElement(y,null,"Enter your email below and we will send you an email containing a link, which you can use to change your password."),a.a.createElement(w.a,{id:"login-email",name:"email",type:"text",inputRef:r,label:"Email",variant:"outlined",error:!!u,helperText:u,fullWidth:!0,InputProps:{endAdornment:a.a.createElement(j.a,{position:"end"},a.a.createElement(N.a,null))}}),a.a.createElement(k.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0},"Send recovery email"),e.error?a.a.createElement(y,{error:!0},e.error):null),a.a.createElement(x.a,null),a.a.createElement("div",{className:"signInOptions"},a.a.createElement(k.a,{onClick:function(){return e.handleLogin()}},"Back")))))}var jt=P.b({email:P.d().defined().min(3).max(255).email()}).defined();function Ot(e){var t=Object(r.useState)(),n=Object(d.a)(t,2),i=n[0],o=n[1],c=Object(r.useState)(!1),u=Object(d.a)(c,2),f=u[0],m=u[1],p=De(),h=Ne((function(e){return e.auth.forgotPassword})),v=Ne((function(e){return e.auth.loginWithGoogle}));function g(){return(g=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(void 0),e.next=3,h(t);case 3:(n=e.sent).onSuccess((function(){return m(!0)})),n.onFailure((function(e){switch(e.code){case"data/invalid-request-data":o("Invalid email or password.");break;case"auth/invalid-credentials":o("Wrong password or the user does not have a password.");break;case"auth/user-not-found":o("No user exists with that email.");break;case"server/unavailable":o("Could not contact server. Try again later.");break;default:console.warn("Uncaught error code in login:",e),o("An error occured while logging in. Try again.")}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p((function(e){return e.login}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p((function(e){return e.register}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement(wt,{handleSubmit:function(e){return g.apply(this,arguments)},handleCreateAccount:function(){return E.apply(this,arguments)},handleGoogleSubmit:function(){return y.apply(this,arguments)},handleLogin:function(){return b.apply(this,arguments)},success:f,error:i})}var kt={approot:"/app",dashboard:"/app/dashboard",analytics:"/app/analytics",budget:"/app/budget",settings:"/app/settings",login:"/",forgotPassword:"/forgotPassword",register:"/register"};function xt(){return a.a.createElement(c.d,null,a.a.createElement(c.b,{exact:!0,path:kt.login},a.a.createElement(Pe,null)),a.a.createElement(c.b,{exact:!0,path:kt.register},a.a.createElement(Me,null)),a.a.createElement(c.b,{exact:!0,path:kt.forgotPassword},a.a.createElement(Ot,null)),a.a.createElement(Ye,{exact:!0,path:kt.dashboard},a.a.createElement(Je,null,a.a.createElement(ht,null))),a.a.createElement(Ye,{exact:!0,path:kt.analytics},a.a.createElement(Je,null,a.a.createElement(yt,null))),a.a.createElement(Ye,{exact:!0,path:kt.budget},a.a.createElement(Je,null,a.a.createElement("p",null,"Budget placeholder"))),a.a.createElement(Ye,{exact:!0,path:kt.settings},a.a.createElement(Je,null,a.a.createElement(gt,null))),a.a.createElement(c.b,{exact:!0,path:"/v"},"Version number 0.0.1"),a.a.createElement(c.b,{path:"/"},a.a.createElement(c.a,{to:kt.dashboard})))}var St=function(){var e=Ne((function(e){return e.auth.getProfile}));return Object(r.useEffect)((function(){e()}),[e]),a.a.createElement(xt,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Tt=n(73),Nt=n(579),Ct=n(359),Dt=n(56);function At(e,t){var n=getComputedStyle(document.documentElement).getPropertyValue("--"+e);return t&&t.color,n}var Pt=Object(Ct.a)({palette:{primary:Object(z.a)(Object(z.a)({},Dt.a.deepPurple),{},{main:At("color-primary-main",{color:!0}),dark:At("color-primary-dark",{color:!0}),light:At("color-primary-light",{color:!0}),50:At("color-primary-50",{color:!0}),100:At("color-primary-100",{color:!0}),200:At("color-primary-200",{color:!0}),300:At("color-primary-300",{color:!0}),400:At("color-primary-400",{color:!0}),500:At("color-primary-500",{color:!0}),600:At("color-primary-600",{color:!0}),700:At("color-primary-900",{color:!0}),800:At("color-primary-800",{color:!0}),900:At("color-primary-700",{color:!0}),contrastText:"white"})}});o.a.render(a.a.createElement(I.a,{store:Se},a.a.createElement(Nt.a,{theme:Pt},a.a.createElement(a.a.StrictMode,null,a.a.createElement(Tt.a,null,a.a.createElement(St,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[368,1,2]]]);
//# sourceMappingURL=main.cc0d7969.chunk.js.map